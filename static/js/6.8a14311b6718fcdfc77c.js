webpackJsonp([6],{WMDo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),i=a.n(s),l=a("exGp"),n=a.n(l),r={data:function(){return{rolesData:[{roleName:"2016-05-02",roleDesc:"王小虎",children:"上海市普陀区金沙江路 1518 弄"}],dialogAssignRightsVisible:!1,treeData:[{id:1,label:"一级 1",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}],defaultProps:{children:"children",label:"authName"},roleId:0}},created:function(){this.loadRolesData(),this.loadAllRightsData()},methods:{loadRolesData:function(){var e=this;return n()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("roles");case 2:a=t.sent,console.log(a),e.rolesData=a.data.data;case 5:case"end":return t.stop()}},t,e)}))()},loadAllRightsData:function(){var e=this;return n()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("rights/tree");case 2:a=t.sent,console.log(a),e.treeData=a.data.data;case 5:case"end":return t.stop()}},t,e)}))()},showAssignRightsDialog:function(e){var t=this;this.roleId=e.id,this.dialogAssignRightsVisible=!0;var a=[];e.children.forEach(function(e){e.children.forEach(function(e){e.children.forEach(function(e){a.push(e.id)})})}),this.$nextTick(function(){t.$refs.tree.setCheckedKeys(a)})},assignRight:function(){var e=this;return n()(i.a.mark(function t(){var a,s,l,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$refs.tree.getHalfCheckedKeys(),s=e.$refs.tree.getCheckedKeys(),console.log(a),l=a.concat(s),t.next=6,e.$axios.post("roles/"+e.roleId+"/rights",{rids:l.join(",")});case 6:n=t.sent,console.log(n),200===n.data.meta.status&&(e.dialogAssignRightsVisible=!1,e.$message({message:"关闭成功",type:"success",duration:800}),e.loadRolesData());case 9:case"end":return t.stop()}},t,e)}))()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolesData}},[a("el-table-column",{attrs:{width:"100",type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,function(t){return a("el-row",{key:t.id,staticClass:"row1"},[a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{closable:"",type:"primary"}},[e._v(e._s(t.authName))]),a("i",{staticClass:"el-icon-arrow-right"})],1),e._v(" "),a("el-col",{attrs:{span:20}},e._l(t.children,function(t){return a("el-row",{key:t.id,staticClass:"row2"},[a("el-col",{attrs:{span:4}},[a("el-tag",{attrs:{closable:"",type:"success"}},[e._v(e._s(t.authName))]),a("i",{staticClass:"el-icon-arrow-right"})],1),e._v(" "),a("el-col",{attrs:{span:20}},e._l(t.children,function(t){return a("el-tag",{key:t.id,attrs:{closable:"",type:"warning",size:"mini"}},[e._v("\n                  "+e._s(t.authName)+"\n                ")])}),1)],1)}),1)],1)})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleDesc",label:"描述",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",type:"primary",size:"mini",icon:"el-icon-edit"}}),e._v(" "),a("el-button",{attrs:{plain:"",type:"danger",size:"mini",icon:"el-icon-delete"}}),e._v(" "),a("el-button",{attrs:{plain:"",type:"success",size:"mini",icon:"el-icon-check"},on:{click:function(a){return e.showAssignRightsDialog(t.row)}}},[e._v("分配权限\n        ")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"收货地址",visible:e.dialogAssignRightsVisible},on:{"update:visible":function(t){e.dialogAssignRightsVisible=t}}},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,"show-checkbox":"","node-key":"id","default-expand-all":"",props:e.defaultProps}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.assignRight}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,o,!1,function(e){a("k9u/")},"data-v-4b959b28",null);t.default=c.exports},"k9u/":function(e,t){}});
//# sourceMappingURL=6.8a14311b6718fcdfc77c.js.map